{"version":3,"file":"middleware.js","sourceRoot":"","sources":["../../server/public-modules/middleware.ts"],"names":[],"mappings":"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"}